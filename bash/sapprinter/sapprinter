#!/bin/bash
LOGGING="yes"
LOGFILE="/var/tmp/sapprinter.log"

log() {
	if [ ${LOGGING} = "yes" ];then
		echo $@ >> ${LOGFILE}
	fi
}

log "================================="
log "sappriter was called at $(date -R)\n"
log "sapprinter ${@}"

former=$1
log "former=${former}"
shift
printer=$1
log "printer=${printer}"
shift 
in_file=$1
log "in_file="${in_file}
shift
log "prameters for ${printer}:$@"


if [ ${former} = "psnup" ];then
	log "psnup is page former"
	cat ${in_file} | pdf2ps | psnup -1 -f | ${printer} $@
	log "cat ${in_file} | pdf2ps | psnup -1 -f | ${printer} $@"
elif [ ${former} = "pdftk" ];then
	log "pdftk is page former"
	out_file="/var/tmp/out.pdf"
	log "out_file=${out_file}"
	pdftk ${in_file} cat 1-endN output ${out_file}
	log "pdftk ${in_file} cat 1-endN output ${out_file}"
	${printer} $@ ${out_file}
	log "${printer} $@ ${out_file}"
	rm ${out_file}
elif [ $LOGGING = "yes" ];then
	log "no action"
fi
log "End."
log "======================================"
log ""


"

